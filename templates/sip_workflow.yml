workflow_name: "SIP Fractionation and Library Prep"
steps:
  - id: setup_plates
    name: "1. Setup Plates & DB"
    script: "setup.isotope.and.FA.plates.py"

  - id: ultracentrifuge_transfer
    name: "2. Create Ultracentrifuge Tubes"
    script: "ultracentrifuge.transfer.py"
    allow_rerun: true
    inputs:
      - type: file
        name: "Sample List"
        arg: ""

  - id: plot_dna_conc
    name: "3. Plot DNA/Density (QC)"
    script: "plot_DNAconc_vs_Density.py"
    allow_rerun: true

  - id: create_db_sequins
    name: "4. Create DB and Add Sequins"
    script: "create.db.and.add.sequins.py"
    allow_rerun: true

  - id: select_fractions_cleanup
    name: "5. Select Fractions for Cleanup"
    script: "select.fractions.for.clean.up.py"
    allow_rerun: true

  - id: generate_cscl_cleanup
    name: "6. Generate CsCl Cleanup Files"
    script: "generate.CsCl.cleanup.files.py"
    allow_rerun: true

  - id: process_post_dna_quant
    name: "7. Process Post-DNA Quantification"
    script: "process.post.DNA.quantification.py"
    allow_rerun: true

  - id: make_library_condensed
    name: "8. Create Library Files (Condensed Plates)"
    script: "make.library.creation.files.condensed.plates.py"

  - id: first_fa_analysis
    name: "9. Analyze Library QC (1st)"
    script: "first.FA.output.analysis.py"

  - id: rework_first_attempt
    name: "10. Second Attempt Library Creation"
    script: "rework.first.attempt.py"

  - id: second_fa_analysis
    name: "11. Analyze Library QC (2nd)"
    script: "second.FA.output.analysis.py"

  - id: third_attempt_decision
    name: "Decision: Third Library Creation Attempt"
    script: "decision_third_attempt.py"

  - id: rework_second_attempt
    name: "12. Third Attempt Library Creation"
    script: "emergency.third.attempt.rework.py"

  - id: third_fa_analysis
    name: "13. Analyze Library QC (3rd)"
    script: "emergency.third.FA.output.analysis.py"

  - id: conclude_fa_analysis
    name: "14. Conclude FA analysis"
    script: "conclude.all.fa.analysis.py"

  - id: make_clarity_summary
    name: "15. Make Clarity Summary"
    script: "make.clarity.summary.py"

  - id: generate_pool_tool
    name: "16. Generate Pool Assignment Tool"
    script: "generate_pool_assignment_tool.py"

  - id: run_pooling_preparation
    name: "17. Prepare Pools"
    script: "run.pooling.preparation.py"

  - id: pool_fa12_analysis
    name: "18. Analyze Pool QC Results"
    script: "pool.FA12.analysis.py"
    allow_rerun: true

  - id: rework_pooling
    name: "19. Rework Pools & Finalize"
    script: "rework.pooling.steps.py"
    allow_rerun: true
  
  - id: transfer_pools
    name: "20. Transfer Pools to Final Tubes"
    script: "transfer.pools.to.final.tubes.py"